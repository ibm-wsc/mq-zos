
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="IBM MQ for z/OS">
      
      
        <meta name="author" content="IBM Z WSC">
      
      
        <link rel="canonical" href="https://github.com/ibm-wsc/mq-zos/kafka-client/">
      
      
        <link rel="prev" href="../kafka-bindings/">
      
      
        <link rel="next" href="../logging/">
      
      
      <link rel="icon" href="../assets/wsc-logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Kafka via Client Connections Lab - IBM MQ for z/OS</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#connecting-ibm-mq-for-zos-to-kafka-as-a-client" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IBM MQ for z/OS" class="md-header__button md-logo" aria-label="IBM MQ for z/OS" data-md-component="logo">
      
  <img src="../assets/wsc-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM MQ for z/OS
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kafka via Client Connections Lab
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ibm-wsc/mq-zos" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IBM MQ for z/OS" class="md-nav__button md-logo" aria-label="IBM MQ for z/OS" data-md-component="logo">
      
  <img src="../assets/wsc-logo.png" alt="logo">

    </a>
    IBM MQ for z/OS
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ibm-wsc/mq-zos" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../saf-console/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basic SAF Authentication for MQ Console
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../saf-keyrings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring SAF Key Rings for MQ Console
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../certificates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Certificate Management Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../new-queue-manager/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring a New Queue Manager Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../connectivity/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Connectivity to Lab Environment
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../comparing-offloading/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Comparing Offloading Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../kafka-bindings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka via Bindings Mode Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Kafka via Client Connections Lab
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Kafka via Client Connections Lab
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#audience-level" class="md-nav__link">
    <span class="md-ellipsis">
      Audience level
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skill-set" class="md-nav__link">
    <span class="md-ellipsis">
      Skill set
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      High-level architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisities" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-requisities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-begin" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Begin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i-configure-your-mq-objects" class="md-nav__link">
    <span class="md-ellipsis">
      I. Configure your MQ objects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ii-prepare-your-kafka-server-and-topic" class="md-nav__link">
    <span class="md-ellipsis">
      II. Prepare your Kafka server and topic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii-running-the-mq-source-connector" class="md-nav__link">
    <span class="md-ellipsis">
      III. Running the MQ source connector
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iv-send-messages-from-mq-to-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      IV. Send messages from MQ to Kafka
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v-stopping-apache-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      v. Stopping Apache Kafka
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-could-go-wrong-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      What could go wrong? Error handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../logging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Logging
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../mp1b/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MP1B Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../qm_upgrade/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queue Manager Upgrade Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../queue-statistics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Queue Statistics Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../streaming-queues/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Streaming Queues Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../securitylab/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Security Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../triggering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Triggering Lab
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../archive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Archived Materials
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MQSMF Blog
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            MQSMF Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Blog/CF%20calls%20Generated%20by%20an%20MQGET%20Query/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CF Calls Generated by an MQGET Query
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Blog/MultipleQSGAndViews/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multiple QSG And Views
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Blog/SMF%20data%20gathering%20suggestions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    SMF Data Gathering Suggestions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Blog/Symptoms%20that%20led%20to%20PD/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Symptoms that led to problem determination
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Blog/Task%20record%20information/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task Record Information
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#audience-level" class="md-nav__link">
    <span class="md-ellipsis">
      Audience level
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#skill-set" class="md-nav__link">
    <span class="md-ellipsis">
      Skill set
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#background" class="md-nav__link">
    <span class="md-ellipsis">
      Background
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#high-level-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      High-level architecture
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-requisities" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-requisities
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-overview" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lab-begin" class="md-nav__link">
    <span class="md-ellipsis">
      Lab Begin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#i-configure-your-mq-objects" class="md-nav__link">
    <span class="md-ellipsis">
      I. Configure your MQ objects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ii-prepare-your-kafka-server-and-topic" class="md-nav__link">
    <span class="md-ellipsis">
      II. Prepare your Kafka server and topic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iii-running-the-mq-source-connector" class="md-nav__link">
    <span class="md-ellipsis">
      III. Running the MQ source connector
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#iv-send-messages-from-mq-to-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      IV. Send messages from MQ to Kafka
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#v-stopping-apache-kafka" class="md-nav__link">
    <span class="md-ellipsis">
      v. Stopping Apache Kafka
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-could-go-wrong-error-handling" class="md-nav__link">
    <span class="md-ellipsis">
      What could go wrong? Error handling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="connecting-ibm-mq-for-zos-to-kafka-as-a-client">Connecting IBM MQ for z/OS to Kafka as a client</h1>
<h4 id="audience-level"><strong>Audience level</strong></h4>
<p>Knowledge of IBM MQ for z/OS or Linux</p>
<h4 id="skill-set"><strong>Skill set</strong></h4>
<p>Kafka, IBM MQ for z/OS</p>
<h4 id="background"><strong>Background</strong></h4>
<p>This lab is designed for MQ administrators looking to gain beginner experience with Apache Kafka. If you are looking to gain familiarity with connecting IBM MQ for z/OS to Kafka for event-streaming, this lab is a great place to start. In this lab, we will walk through configuring the open-source Kafka Connector to demonstrate how to capture z/OS events with a standalone Kafka instance. Businesses are looking to capture the valuable insights on z/OS with events, using Kafka. As an MQ administrator, this lab will help you become comfortable with the Kafka architecture. This lab is for development and test purposes only.</p>
<p>If you have a license for IBM MQ for z/OS Advanced or Advanced VUE or IBM Event Streams, you have fully supported access to the MQ-Kafka connectors. </p>
<h4 id="high-level-architecture">High-level architecture</h4>
<p><img alt="MQ Kafka via Client mode diagram" src="../assets/kafka-mq-clients.png" /></p>
<h4 id="pre-requisities">Pre-requisities</h4>
<ol>
<li>
<p>Java running on Windows Subsystem for Linux</p>
<div class="highlight"><pre><span></span><code>openjdk version &quot;21.0.6&quot; 2025-01-21
OpenJDK Runtime Environment (build 21.0.6+7-Ubuntu-122.04.1)
OpenJDK 64-Bit Server VM (build 21.0.6+7-Ubuntu-122.04.1, mixed mode, sharing)
</code></pre></div>
</li>
<li>
<p>Apache Maven running on Windows Subsystem for Linux</p>
<div class="highlight"><pre><span></span><code>Apache Maven 3.6.3
Maven home: /usr/share/maven
Java version: 21.0.6, vendor: Ubuntu, runtime: /usr/lib/jvm/java-21-openjdk-amd64
Default locale: en, platform encoding: UTF-8
OS name: &quot;linux&quot;, version: &quot;5.15.167.4-microsoft-standard-wsl2&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
</code></pre></div>
</li>
<li>
<p>Apache Kafka downloaded from <a href="https://kafka.apache.org/downloads">here</a> in binary format from (I am using kafka_2.13-3.9.0)</p>
</li>
<li>
<p>IBM MQ for z/OS. I am using IBM MQ version 9.4. You must use a version of MQ beyond v.8.</p>
</li>
</ol>
<h3 id="lab-overview">Lab Overview</h3>
<p>I. Configure MQ objects
II. Prepare your Kafka server and topic
II. Run the MQ-Kafka source connector
III. Send messages from MQ to Kafka
IV. Stopping Apache Kafka</p>
<h3 id="lab-begin">Lab Begin</h3>
<h3 id="i-configure-your-mq-objects">I. Configure your MQ objects</h3>
<p>In this step, we will create the necessary MQ objects to send messages from MQ to our Kafka client.</p>
<ol>
<li>
<p>In order to send messages from MQ to Kafka, we need to set up a queue and a channel on MQ. On the MQ Web Console or MQ Explorer, create a local queue called KAFKA.QUEUE.</p>
</li>
<li>
<p>On the MQ Web Console or MQ Explorer, create a server-connection channel called KAFKA.SVRCONN.</p>
</li>
</ol>
<h3 id="ii-prepare-your-kafka-server-and-topic">II. Prepare your Kafka server and topic</h3>
<p>In this step, we will start the Kafka server and create our first topic. </p>
<p>1. Navigate to your linux distro on your local machine. This example assumes the use of Ubuntu.</p>
<p>2. Start a ZooKeeper server:
    <div class="highlight"><pre><span></span><code>bin/zookeeper-server-start.sh<span class="w"> </span>config/zookeeper.properties
</code></pre></div></p>
<div class="highlight"><pre><span></span><code>You will see a long list of messages, including the Zookeeper logo.
</code></pre></div>
<p>3. In another terminal, start a Kafka server:
    <div class="highlight"><pre><span></span><code>bin/kafka-server-start.sh<span class="w"> </span>config/server.properties
</code></pre></div></p>
<div class="highlight"><pre><span></span><code>You will see a long list of messages.
</code></pre></div>
<p>4. In a third terminal window, create a topic called <code>TSOURCE</code> for the connector to send events to:
    <div class="highlight"><pre><span></span><code>bin/kafka-topics.sh<span class="w"> </span>--zookeeper<span class="w"> </span>localhost:2181<span class="w">  </span>--create<span class="w"> </span>--topic<span class="w"> </span>TSOURCE<span class="w"> </span>--partitions<span class="w"> </span><span class="m">1</span><span class="w"> </span>--replication-factor<span class="w"> </span><span class="m">1</span>
</code></pre></div></p>
<p>5. At this point, you have a Kafka cluster consisting of a single node.</p>
<p>The configuration is as follows:
* Kafka bootstrap server - <code>localhost:9092</code>
* ZooKeeper server - <code>localhost:2181</code>
* Topic name - <code>TSOURCE</code></p>
<p><strong>Note:</strong> This configuration of Kafka puts its data in <code>/tmp/kafka-logs</code>, while ZooKeeper uses <code>/tmp/zookeeper</code> and Kafka Connect uses <code>/tmp/connect.offsets</code>. You can clear out these directories to reset to an empty state, making sure beforehand that they're not being used for something else. Use kafka-logs to navigate error-handling</p>
<h3 id="iii-running-the-mq-source-connector">III. Running the MQ source connector</h3>
<p>The MQ source connector takes messages from an MQ queue and transfers them to a Kafka topic.</p>
<p>1. In a directory of your choice, clone and build the connector:</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/ibm-messaging/kafka-connect-mq-source.git
<span class="nb">cd</span><span class="w"> </span>kafka-connect-mq-source
mvn<span class="w"> </span>clean<span class="w"> </span>package
</code></pre></div>
<p>Going forward, we'll refer to the top-level directory you used to build the connector as the <em>connector root directory</em>.</p>
<p>2. In a terminal window, change directory into the connector root directory and copy the sample connector configuration file into your home directory so you can edit it safely:
    <div class="highlight"><pre><span></span><code>cp<span class="w"> </span>config/mq-source.properties<span class="w"> </span>~
</code></pre></div></p>
<p>3. Edit the following properties in the <code>~/kafka-connect-mq-source/mq-source.properties</code> file to match the configuration so far:
   <div class="highlight"><pre><span></span><code>topic=TSOURCE
mq.queue.manager=ZQS1
mq.connection.name.list=localhost(1414)
mq.channel.name=KAFKA.SVRCONN
mq.queue=KAFKA.QUEUE
</code></pre></div></p>
<p>4. You will also have to modify <code>/config/connect-standalone.properties</code> in your Kafka root directory. The last line should reflect the location of your connector root directory.
    <div class="highlight"><pre><span></span><code>plugin.path=~/kafka-connect-mq-source
</code></pre></div></p>
<p><strong>Note:</strong> You may notice here the use of one queue manager could inhibit high availability. This is because we are running the connector in standalone mode. To achieve higher availability, you would either want to use shared queues in your MQ configuration or run the connector in distributed mode. Distributed mode is beyond the scope of this tutorial.</p>
<p>4. Change directory to the Kafka root directory. Start the connector worker replacing <code>&lt;connector-root-directory&gt;</code> and <code>&lt;version&gt;</code> with your directory and the connector version:</p>
<div class="highlight"><pre><span></span><code>``` shell
CLASSPATH=&lt;connector-root-directory&gt;/target/kafka-connect-mq-source-&lt;version&gt;-jar-with-dependencies.jar bin/connect-standalone.sh config/connect-standalone.properties ~/mq-source.properties
```

The log output will include the following messages that indicate the connector worker has started and successfully connected to IBM MQ:

```
INFO Created connector mq-source
INFO Connection to MQ established
```
</code></pre></div>
<p><strong>Note:</strong> We are running our connector in standalone mode here for simplicity. </p>
<p>5. Once the connector has started successfully and connected to MQ, you'll see this message:</p>
<div class="highlight"><pre><span></span><code>INFO Connection to MQ established
</code></pre></div>
<p>You should also be able to see your KAFKA.QUEUE on MQ with the open input field as 1. </p>
<h3 id="iv-send-messages-from-mq-to-kafka">IV. Send messages from MQ to Kafka</h3>
<p>1. In a new terminal window, use the Kafka console consumer to start consuming messages from your topic and print them to the console:
<div class="highlight"><pre><span></span><code>bin/kafka-console-consumer.sh<span class="w"> </span>--bootstrap-server<span class="w"> </span>localhost:9092<span class="w"> </span>--topic<span class="w"> </span>TSOURCE
</code></pre></div></p>
<p>2. Now, from either the MQ Web Console or MQ Explorer, go ahead and put some test messages on your queue. After a short delay, you should see the messages printed by the Kafka console consumer.</p>
<p>Congratulations! The messages were transferred from the MQ queue <code>KAFKA.QUEUE</code> onto the Kafka topic <code>TSOURCE</code>.</p>
<h3 id="v-stopping-apache-kafka">v. Stopping Apache Kafka</h3>
<p>To shut down your work cleanly, in the Kafka root directory, stop Kafka and ZooKeeper:</p>
<div class="highlight"><pre><span></span><code>bin/kafka-server-stop.sh
bin/zookeeper-server-stop.sh
</code></pre></div>
<p><strong>Note:</strong> Make sure Kafka is fully stopped before stopping ZooKeeper.</p>
<h3 id="what-could-go-wrong-error-handling">What could go wrong? Error handling</h3>
<ul>
<li>
<p>You may have to alter the defaults in config/server.properties. The location of your log should reflect a useful path for your own environment. As an example:  </p>
<div class="highlight"><pre><span></span><code># A comma separated list of directories under which to store log files
log.dirs=/mnt/c/kafka-logs
</code></pre></div>
</li>
<li>
<p>If something goes wrong, you'll see familiar MQ reason codes in the error messages to help you diagnose the problems, such as:</p>
<div class="highlight"><pre><span></span><code>ERROR MQ error: CompCode 2, Reason 2538 MQRC_HOST_NOT_AVAILABLE
</code></pre></div>
<p>You can just kill the worker, fix the problem and start it up again.</p>
</li>
</ul>
<h3 id="conclusion">Conclusion</h3>
<p>Congratulations! You have now tested a simple example of running MQ and Kafka together using the source connector send messages from the direction of z/OS to Kafka. While client mode is a easy way to get started, running the kafka connector in bindings mode is optimal due the improved CPU consumption and latency. Additionally, because the kafka connector is written in java, it is zIIP eligible.</p>
<p>Acknowledgements: MQ Development team</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>